<!DOCTYPE html>
<html>
<head>
    <title>Universal Map Installer</title>
    <style>
        #progress { width: 100%; border: 1px solid #000; display: none; }
        #bar { width: 0%; height: 20px; background: green; }
    </style>
</head>
<body>
    <h1>Map Tool Setup</h1>
    <p>Target: Android 2.3+ / Universal</p>
    <button id="installBtn" onclick="startSetup()">CLICK TO INSTALL MAPS</button>
    
    <div id="progress"><div id="bar"></div></div>
    <div id="instructions" style="display:none;">
        <strong>Step 2:</strong> Press 'Menu' then 'Add Shortcut' to finish.
    </div>

    <script type="text/javascript">
        function startSetup() {
            var btn = document.getElementById('installBtn');
            var bar = document.getElementById('bar');
            document.getElementById('progress').style.display = 'block';
            btn.disabled = true;

            // Using standard XHR for Android 2.3 compatibility
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'map_payload.zip', true);
            xhr.responseType = 'blob';

            xhr.onprogress = function(e) {
                if (e.lengthComputable) {
                    var percent = (e.loaded / e.total) * 100;
                    bar.style.width = percent + '%';
                }
            };

            xhr.onload = function() {
                if (this.status == 200) {
                    // Logic to save the blob or notify user extraction is done
                    alert("Maps Downloaded! Follow instructions below to add to Home Screen.");
                    document.getElementById('instructions').style.display = 'block';
                    // Optional: redirect to the actual app file
                    // window.location.href = 'app.html';
                }
            };
            xhr.send();
        }
    </script>
</body>
</html>
